'use strict';Object.defineProperty(exports,"__esModule",{value:!0});function _interopDefault(a){return a&&"object"===typeof a&&"default"in a?a["default"]:a}var url=require("url"),request=_interopDefault(require("request")),API=function(a){if("object"!==typeof a||null===a||a instanceof Array)throw new TypeError("Hypno.API expects first parameter to be an object literal, specifying the options");this.options=a;this.options.domain=this.options.domain||""};
API.prototype.get=function(a,c){c=c||{};return new Promise(function(g,e){function f(a,b){var d=c.parameters[b];delete c.parameters[b];return d}this.options.endpoints[a]||e("Unknown endpoint "+a);var b=this.options.endpoints[a],d;for(d in c.parameters)c.parameters.hasOwnProperty(d)&&b.includes("%"+d+"%")&&(console.log("%"+d+"% => "+c.parameters[d]),b=b.replace(new RegExp("%("+d+")%","g"),f));b=b.replace(/%\w+%/g,"");b={url:url.resolve(this.options.domain,b),json:!0,headers:this.options.headers,qs:c.parameters};
console.log("GET "+b.url);request(b,function(a,b){a&&e(a);console.log("Got response")})}.bind(this))};exports.API=API;
